{% extends "base.html" %}
{% block header %}
    {{ super() }}
{% endblock %}

{% block style %}
<style>
    body {
        background-image: url('../static/images/connected.png');
        padding-top: 120px;
    }
</style>
{% endblock %}

{% block body %}
<div class="ui three column centered stackable grid">
   <div class="column">
    <div class="ui green segment">
        <h2 class="ui centered dividing header">
            萌百姬器人
            <div class="sub header">
                刚从小黑屋出来的v.alpha
            </div>
        </h2>
        <form action="login" method="post" class="ui form">
           <div class="field">
               <div class="ui left icon input">
                   <i class="user icon"></i>
                    <input name="username" type="text" placeholder="用户名">
                </div>
            </div>
            <div class="field">
                <div class="ui left icon input">
                    <i class="privacy icon"></i>
                    <input name="password" type="password" placeholder="密码">
                </div>
            </div>
            <div class="ui error message">
            </div>
        </form>
        {% if get_flashed_messages() %}            
        <div class="ui error message">
            <div class="header">登录错误</div>
            <ul class="list">
            {% for message in get_flashed_messages() %}
                <li>{{ message }}</li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        <div class="ui inverted divider"></div>
        <div id="submit" class="ui green submit button right floated">
            登录
        </div>
        <div style="clear:both;"></div>            
    </div>
  </div>
</div>    
{% endblock %}

{% block script %}
    {{ super() }}
    <script>
        $(document).ready(function() {
            $('.ui.form').form({
                    username: {
                        identifier: 'username',
                        rules: [
                            {
                                type : 'empty',
                                prompt : '请输入你的用户名'
                            }
                        ]
                    },
                    password : {
                        identifier: 'password',
                        rules: [
                            {
                                type: 'empty',
                                prompt: '请输入你的密码'
                            },
                            {
                                type: 'length[6]',
                                prompt: '密码至少6位'
                            }
                        ]
                    }
            });
            $('.ui.submit.button').click(function() {
                console.log('submit!');
                $('.ui.form').submit();
            });
        });
    </script>
{% endblock %}

